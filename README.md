# bloxdMinecarts
I added minecarts in bloxd.io! All info how to use in the DESCRIPTION.md file.
Here's the world code:

    var __initMobs__=[],ticks=0,minecarts=[],customDrops={"Spawn Block (Gray)":{customDisplayName:"Rail",customDescription:"Place to let minecarts roll on it."},"Spawn Block (Orange)":{customDisplayName:"Powered Rail",customDescription:"Place to speed minecarts up."}},customCrafts={"Gray Quick Paintball Explosive Item":{att:{customDisplayName:"TNT Minecart",customDescription:"Place on rails. Hit it to blow it up."},amt:1,req:[{name:"Moonstone Explosive",amt:1},{name:"Iron Bar",amt:5}]},"Spawn Block (Gray)":{att:{customDisplayName:"Rail",customDescription:"Place to let minecarts roll on it."},amt:16,req:[{name:"Stick",amt:1},{name:"Iron Bar",amt:6}]},"Spawn Block (Orange)":{att:{customDisplayName:"Powered Rail",customDescription:"Place to speed minecarts up."},amt:16,req:[{name:"Stick",amt:1},{name:"Gold Bar",amt:6}]}};function tick(){for(m of(ticks++,__initMobs__))api.updateEntityNodeMeshAttachment(m.id,"HeadMesh","BloxdBlock",{blockName:"Moonstone Explosive",size:.6}),api.updateEntityNodeMeshAttachment(m.id,"LegLeftMesh","BloxdBlock",{blockName:"Block of Iron",size:1}),api.applyEffect(m.id,"Invisible",null,{}),m.time+5<ticks&&(__initMobs__=__initMobs__.filter((t=>t.id!=m.id)));for(let t of minecarts){if(!api.getMobIds().includes(t.id))continue;let e=api.getPosition(t.id),[i,a,o]=e,n=api.getBlock(e[0],e[1]-1,e[2]).split("|");void 0===n[2]&&(n[2]="rot1");let s=n[2].slice(3);if("Spawn Block (Gray)"==n[0]){let i={x:0,z:0};if(1==s&&(i.z=-1),2==s&&(i.x=-1),3==s&&(i.z=1),4==s&&(i.x=1),1!=s&&3!=s||(e[0]=Math.floor(e[0])+.5),2!=s&&4!=s||(e[2]=Math.floor(e[2])+.5),api.setPosition(t.id,e[0],e[1],e[2]),t.speed<=0)continue;t.lastRot!=i&&(i.z!=t.lastRot.z?i.x=0:i.x!=t.lastRot.x&&(i.z=0)),api.applyImpulse(t.id,t.speed*i.x,0,t.speed*i.z),t.speed-=.1,t.lastRot=i}if("Spawn Block (Orange)"==n[0]){let i={x:0,z:0};1==s&&(i.z=-1),2==s&&(i.x=-1),3==s&&(i.z=1),4==s&&(i.x=1),1!=s&&3!=s||(e[0]=Math.floor(e[0])+.5),2!=s&&4!=s||(e[2]=Math.floor(e[2])+.5),api.setPosition(t.id,e[0],e[1],e[2]),t.speed=2,t.lastRot!=i&&(i.z!=t.lastRot.z?i.x=0:i.x!=t.lastRot.x&&(i.z=0)),api.applyImpulse(t.id,t.speed*i.x,0,t.speed*i.z),t.lastRot=i}}}function onWorldSpawnMob(t){api.despawnMob(t)}function onPlayerClick(t,e){if(e&&"Gray Quick Paintball Explosive Item"==api.getHeldItem(t)?.name&&api.getPlayerTargetInfo(t)?.position){var[i,a,o]=api.getPlayerTargetInfo(t)?.position;if(null!=i&&api.getBlock([i,a,o]).includes("Spawn Block (")){let e=api.attemptSpawnMob("Draugr Zombie",i+.5,a+1,o+.5,{spawnerId:t,name:"TNT Minecart",playSoundOnSpawn:!1});e&&(api.setMobSetting(e,"metaInfo","tnt-minecart"),api.removeItemName(t,"Gray Quick Paintball Explosive Item",1))}}}function onPlayerChangeBlock(t,e,i,a,o,n,s){if(Object.keys(customDrops).includes(s))return null!=s?(api.createItemDrop(e+.5,i+.5,a+.5,s,1,!1,customDrops[s]),"preventDrop"):void 0}function onPlayerJoin(t){for(const e of Object.keys(customCrafts)){const i=customCrafts[e];let a={requires:[],produces:void 0};for(const t of i.req)a.requires.push({items:[t.name],amt:t.amt});a.produces=i.amt,a.station=i.station,api.editItemCraftingRecipes(t,e,[a])}}function onPlayerAttemptCraft(t,e){const i=customCrafts[e];if(i){for(const e of i.req)api.removeItemName(t,e.name,e.amt);return api.giveItem(t,e,i.amt,i.att),"preventCraft"}}function onMobKilledOtherMob(t,e){minecarts.includes(e)&&(minecarts=minecarts.filter((t=>t.id!=e)))}function onMobDespawned(t){minecarts.includes(t)&&(minecarts=minecarts.filter((e=>e.id!=t)))}onPlayerSpawnMob=(t,e,i,a,o,n,s,r)=>{"TNT Minecart"==api.getMobSetting(e,"name")&&(api.setMobSetting(e,"onDeathItemDrops",[{itemName:"Raw Porkchop",probabilityOfDrop:0,dropMinAmount:1,dropMaxAmount:3}]),api.setMobSetting(e,"walkingSpeedMultiplier",0),api.setMobSetting(e,"runningSpeedMultiplier",0),api.setMobSetting(e,"metaInfo","tnt-minecart"),api.setMobSetting(e,"attackRadius",0),api.setMobSetting(e,"jumpMultiplier",0),api.setMobSetting(e,"name",""),api.setMobSetting(e,"idleSound",null),__initMobs__.push({id:e,time:ticks}),minecarts.push({id:e,speed:0,lastRot:{x:0,z:0}}))},onPlayerDamagingMob=(t,e,i,a)=>{let o=api.getMobSetting(e,"metaInfo");if("Draugr Zombie"!=api.getEntityType(e)||"tnt-minecart"!=o)return;let[n,s,r]=api.getPosition(e);const l=Math.min(10,6+Math.floor(i/10)),p=api.getEntitiesInRect([n-l,s-l,r-l],[n+l,s+l,r+l]);for(const i of p){if(i===e)continue;if("Player"!=api.getEntityType(i))continue;const[a,o,p]=api.getPosition(i),m=a-n,c=o-s,u=p-r,d=Math.sqrt(m*m+c*c+u*u);if(d>l||0===d)continue;const f=1-d/l,M=Math.ceil(100*f);api.attemptApplyDamage({eId:t,hitEId:i,attemptedDmgAmt:M,withItem:"Gray Quick Paintball Explosive Item",isTrueDamage:!1,broadcastEntityHurt:!0});const b=30*f,g=m/d*b,y=15*f,k=u/d*b;api.applyImpulse(i,g,y,k)}s+=1,api.playParticleEffect({dir1:[-1,-1,-1],dir2:[1,1,1],pos1:[n,s,r],pos2:[n,s,r],texture:"generic_2",minLifeTime:1,maxLifeTime:1.5,minEmitPower:30,maxEmitPower:40,minSize:.25,maxSize:.35,manualEmitCount:750,gravity:[0,-1,0],colorGradients:[{timeFraction:0,minColor:[255,255,255,1],maxColor:[100,100,100,.5]}],velocityGradients:[{timeFraction:0,factor:1,factor2:1}],blendMode:1}),api.despawnMob(e),minecarts.filter((t=>t!=e)),__initMobs__=__initMobs__.filter((t=>t!=e)),api.broadcastSound("cannonFire3",1,1)};

